{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport moment from 'moment';\nvar CALENDER_HEIGHT = 2400;\nvar offset = CALENDER_HEIGHT / 24;\n\nfunction buildEvent(column, left, width) {\n  var startTime = moment(column.start);\n  var endTime = column.end ? moment(column.end) : startTime.clone().add(1, 'hour');\n  var diffHours = startTime.diff(startTime.clone().startOf('day'), 'hours', true);\n  column.top = diffHours * offset;\n  column.height = endTime.diff(startTime, 'hours', true) * offset;\n  column.width = width;\n  column.left = left;\n  return column;\n}\n\nfunction collision(a, b) {\n  return a.end > b.start && a.start < b.end;\n}\n\nfunction expand(ev, column, columns) {\n  var colSpan = 1;\n\n  for (var i = column + 1; i < columns.length; i++) {\n    var col = columns[i];\n\n    for (var j = 0; j < col.length; j++) {\n      var ev1 = col[j];\n\n      if (collision(ev, ev1)) {\n        return colSpan;\n      }\n    }\n\n    colSpan++;\n  }\n\n  return colSpan;\n}\n\nfunction pack(columns, width, calculatedEvents) {\n  var colLength = columns.length;\n\n  for (var i = 0; i < colLength; i++) {\n    var col = columns[i];\n\n    for (var j = 0; j < col.length; j++) {\n      var colSpan = expand(col[j], i, columns);\n      var L = i / colLength * width;\n      var W = width * colSpan / colLength - 10;\n      calculatedEvents.push(buildEvent(col[j], L, W));\n    }\n  }\n}\n\nfunction populateEvents(events, screenWidth) {\n  var lastEnd;\n  var columns;\n  var self = this;\n  var calculatedEvents = [];\n  events = events.map(function (ev, index) {\n    return _objectSpread(_objectSpread({}, ev), {}, {\n      index: index\n    });\n  }).sort(function (a, b) {\n    if (a.start < b.start) return -1;\n    if (a.start > b.start) return 1;\n    if (a.end < b.end) return -1;\n    if (a.end > b.end) return 1;\n    return 0;\n  });\n  columns = [];\n  lastEnd = null;\n  events.forEach(function (ev, index) {\n    if (lastEnd !== null && ev.start >= lastEnd) {\n      pack(columns, screenWidth, calculatedEvents);\n      columns = [];\n      lastEnd = null;\n    }\n\n    var placed = false;\n\n    for (var i = 0; i < columns.length; i++) {\n      var col = columns[i];\n\n      if (!collision(col[col.length - 1], ev)) {\n        col.push(ev);\n        placed = true;\n        break;\n      }\n    }\n\n    if (!placed) {\n      columns.push([ev]);\n    }\n\n    if (lastEnd === null || ev.end > lastEnd) {\n      lastEnd = ev.end;\n    }\n  });\n\n  if (columns.length > 0) {\n    pack(columns, screenWidth, calculatedEvents);\n  }\n\n  return calculatedEvents;\n}\n\nexport default populateEvents;","map":{"version":3,"sources":["/mnt/d/Users/Caputo/Desktop/IDEs/VSCode/CEN3031/Project/DCPA-UF-APP/App/node_modules/react-native-events-calendar/src/Packer.js"],"names":["moment","CALENDER_HEIGHT","offset","buildEvent","column","left","width","startTime","start","endTime","end","clone","add","diffHours","diff","startOf","top","height","collision","a","b","expand","ev","columns","colSpan","i","length","col","j","ev1","pack","calculatedEvents","colLength","L","W","push","populateEvents","events","screenWidth","lastEnd","self","map","index","sort","forEach","placed"],"mappings":";;;;;;AACA,OAAOA,MAAP,MAAmB,QAAnB;AACA,IAAMC,eAAe,GAAG,IAAxB;AACA,IAAMC,MAAM,GAAGD,eAAe,GAAG,EAAjC;;AAEA,SAASE,UAAT,CAAqBC,MAArB,EAA6BC,IAA7B,EAAmCC,KAAnC,EAA0C;AACxC,MAAMC,SAAS,GAAGP,MAAM,CAACI,MAAM,CAACI,KAAR,CAAxB;AACA,MAAMC,OAAO,GAAGL,MAAM,CAACM,GAAP,GAAaV,MAAM,CAACI,MAAM,CAACM,GAAR,CAAnB,GAAkCH,SAAS,CAACI,KAAV,GAAkBC,GAAlB,CAAsB,CAAtB,EAAyB,MAAzB,CAAlD;AACA,MAAMC,SAAS,GAAGN,SAAS,CAACO,IAAV,CAAeP,SAAS,CAACI,KAAV,GAAkBI,OAAlB,CAA0B,KAA1B,CAAf,EAAiD,OAAjD,EAA0D,IAA1D,CAAlB;AAEAX,EAAAA,MAAM,CAACY,GAAP,GAAaH,SAAS,GAAGX,MAAzB;AACAE,EAAAA,MAAM,CAACa,MAAP,GAAgBR,OAAO,CAACK,IAAR,CAAaP,SAAb,EAAwB,OAAxB,EAAiC,IAAjC,IAAyCL,MAAzD;AACAE,EAAAA,MAAM,CAACE,KAAP,GAAeA,KAAf;AACAF,EAAAA,MAAM,CAACC,IAAP,GAAcA,IAAd;AACA,SAAOD,MAAP;AACD;;AAED,SAASc,SAAT,CAAoBC,CAApB,EAAuBC,CAAvB,EAA0B;AACxB,SAAOD,CAAC,CAACT,GAAF,GAAQU,CAAC,CAACZ,KAAV,IAAmBW,CAAC,CAACX,KAAF,GAAUY,CAAC,CAACV,GAAtC;AACD;;AAED,SAASW,MAAT,CAAiBC,EAAjB,EAAqBlB,MAArB,EAA6BmB,OAA7B,EAAsC;AACpC,MAAIC,OAAO,GAAG,CAAd;;AAEA,OAAK,IAAIC,CAAC,GAAGrB,MAAM,GAAG,CAAtB,EAAyBqB,CAAC,GAAGF,OAAO,CAACG,MAArC,EAA6CD,CAAC,EAA9C,EAAkD;AAChD,QAAIE,GAAG,GAAGJ,OAAO,CAACE,CAAD,CAAjB;;AACA,SAAK,IAAIG,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,GAAG,CAACD,MAAxB,EAAgCE,CAAC,EAAjC,EAAqC;AACnC,UAAIC,GAAG,GAAGF,GAAG,CAACC,CAAD,CAAb;;AACA,UAAIV,SAAS,CAACI,EAAD,EAAKO,GAAL,CAAb,EAAwB;AACtB,eAAOL,OAAP;AACD;AACF;;AACDA,IAAAA,OAAO;AACR;;AAED,SAAOA,OAAP;AACD;;AAED,SAASM,IAAT,CAAeP,OAAf,EAAwBjB,KAAxB,EAA+ByB,gBAA/B,EAAiD;AAC/C,MAAIC,SAAS,GAAGT,OAAO,CAACG,MAAxB;;AAEA,OAAK,IAAID,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGO,SAApB,EAA+BP,CAAC,EAAhC,EAAoC;AAClC,QAAIE,GAAG,GAAGJ,OAAO,CAACE,CAAD,CAAjB;;AACA,SAAK,IAAIG,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,GAAG,CAACD,MAAxB,EAAgCE,CAAC,EAAjC,EAAqC;AACnC,UAAIJ,OAAO,GAAGH,MAAM,CAACM,GAAG,CAACC,CAAD,CAAJ,EAASH,CAAT,EAAYF,OAAZ,CAApB;AACA,UAAIU,CAAC,GAAGR,CAAC,GAAGO,SAAJ,GAAgB1B,KAAxB;AACA,UAAI4B,CAAC,GAAG5B,KAAK,GAAGkB,OAAR,GAAkBQ,SAAlB,GAA8B,EAAtC;AAEAD,MAAAA,gBAAgB,CAACI,IAAjB,CAAsBhC,UAAU,CAACwB,GAAG,CAACC,CAAD,CAAJ,EAASK,CAAT,EAAYC,CAAZ,CAAhC;AACD;AACF;AACF;;AAED,SAASE,cAAT,CAAyBC,MAAzB,EAAiCC,WAAjC,EAA8C;AAC5C,MAAIC,OAAJ;AACA,MAAIhB,OAAJ;AACA,MAAIiB,IAAI,GAAG,IAAX;AACA,MAAIT,gBAAgB,GAAG,EAAvB;AAEAM,EAAAA,MAAM,GAAGA,MAAM,CACZI,GADM,CACF,UAACnB,EAAD,EAAKoB,KAAL;AAAA,2CAAqBpB,EAArB;AAAyBoB,MAAAA,KAAK,EAAEA;AAAhC;AAAA,GADE,EAENC,IAFM,CAED,UAAUxB,CAAV,EAAaC,CAAb,EAAgB;AACpB,QAAID,CAAC,CAACX,KAAF,GAAUY,CAAC,CAACZ,KAAhB,EAAuB,OAAO,CAAC,CAAR;AACvB,QAAIW,CAAC,CAACX,KAAF,GAAUY,CAAC,CAACZ,KAAhB,EAAuB,OAAO,CAAP;AACvB,QAAIW,CAAC,CAACT,GAAF,GAAQU,CAAC,CAACV,GAAd,EAAmB,OAAO,CAAC,CAAR;AACnB,QAAIS,CAAC,CAACT,GAAF,GAAQU,CAAC,CAACV,GAAd,EAAmB,OAAO,CAAP;AACnB,WAAO,CAAP;AACD,GARM,CAAT;AAUAa,EAAAA,OAAO,GAAG,EAAV;AACAgB,EAAAA,OAAO,GAAG,IAAV;AAEAF,EAAAA,MAAM,CAACO,OAAP,CAAe,UAAUtB,EAAV,EAAcoB,KAAd,EAAqB;AAClC,QAAIH,OAAO,KAAK,IAAZ,IAAoBjB,EAAE,CAACd,KAAH,IAAY+B,OAApC,EAA6C;AAC3CT,MAAAA,IAAI,CAACP,OAAD,EAAUe,WAAV,EAAuBP,gBAAvB,CAAJ;AACAR,MAAAA,OAAO,GAAG,EAAV;AACAgB,MAAAA,OAAO,GAAG,IAAV;AACD;;AAED,QAAIM,MAAM,GAAG,KAAb;;AACA,SAAK,IAAIpB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,OAAO,CAACG,MAA5B,EAAoCD,CAAC,EAArC,EAAyC;AACvC,UAAIE,GAAG,GAAGJ,OAAO,CAACE,CAAD,CAAjB;;AACA,UAAI,CAACP,SAAS,CAACS,GAAG,CAACA,GAAG,CAACD,MAAJ,GAAa,CAAd,CAAJ,EAAsBJ,EAAtB,CAAd,EAAyC;AACvCK,QAAAA,GAAG,CAACQ,IAAJ,CAASb,EAAT;AACAuB,QAAAA,MAAM,GAAG,IAAT;AACA;AACD;AACF;;AAED,QAAI,CAACA,MAAL,EAAa;AACXtB,MAAAA,OAAO,CAACY,IAAR,CAAa,CAACb,EAAD,CAAb;AACD;;AAED,QAAIiB,OAAO,KAAK,IAAZ,IAAoBjB,EAAE,CAACZ,GAAH,GAAS6B,OAAjC,EAA0C;AACxCA,MAAAA,OAAO,GAAGjB,EAAE,CAACZ,GAAb;AACD;AACF,GAxBD;;AA0BA,MAAIa,OAAO,CAACG,MAAR,GAAiB,CAArB,EAAwB;AACtBI,IAAAA,IAAI,CAACP,OAAD,EAAUe,WAAV,EAAuBP,gBAAvB,CAAJ;AACD;;AACD,SAAOA,gBAAP;AACD;;AAED,eAAeK,cAAf","sourcesContent":["// @flow\nimport moment from 'moment'\nconst CALENDER_HEIGHT = 2400\nconst offset = CALENDER_HEIGHT / 24\n\nfunction buildEvent (column, left, width) {\n  const startTime = moment(column.start)\n  const endTime = column.end ? moment(column.end) : startTime.clone().add(1, 'hour')\n  const diffHours = startTime.diff(startTime.clone().startOf('day'), 'hours', true)\n\n  column.top = diffHours * offset\n  column.height = endTime.diff(startTime, 'hours', true) * offset\n  column.width = width\n  column.left = left\n  return column\n}\n\nfunction collision (a, b) {\n  return a.end > b.start && a.start < b.end\n}\n\nfunction expand (ev, column, columns) {\n  var colSpan = 1\n\n  for (var i = column + 1; i < columns.length; i++) {\n    var col = columns[i]\n    for (var j = 0; j < col.length; j++) {\n      var ev1 = col[j]\n      if (collision(ev, ev1)) {\n        return colSpan\n      }\n    }\n    colSpan++\n  }\n\n  return colSpan\n}\n\nfunction pack (columns, width, calculatedEvents) {\n  var colLength = columns.length\n\n  for (var i = 0; i < colLength; i++) {\n    var col = columns[i]\n    for (var j = 0; j < col.length; j++) {\n      var colSpan = expand(col[j], i, columns)\n      var L = i / colLength * width\n      var W = width * colSpan / colLength - 10\n\n      calculatedEvents.push(buildEvent(col[j], L, W))\n    }\n  }\n}\n\nfunction populateEvents (events, screenWidth) {\n  let lastEnd\n  let columns\n  let self = this\n  let calculatedEvents = []\n\n  events = events\n    .map((ev, index) => ({ ...ev, index: index }))\n    .sort(function (a, b) {\n      if (a.start < b.start) return -1\n      if (a.start > b.start) return 1\n      if (a.end < b.end) return -1\n      if (a.end > b.end) return 1\n      return 0\n    })\n\n  columns = []\n  lastEnd = null\n\n  events.forEach(function (ev, index) {\n    if (lastEnd !== null && ev.start >= lastEnd) {\n      pack(columns, screenWidth, calculatedEvents)\n      columns = []\n      lastEnd = null\n    }\n\n    var placed = false\n    for (var i = 0; i < columns.length; i++) {\n      var col = columns[i]\n      if (!collision(col[col.length - 1], ev)) {\n        col.push(ev)\n        placed = true\n        break\n      }\n    }\n\n    if (!placed) {\n      columns.push([ev])\n    }\n\n    if (lastEnd === null || ev.end > lastEnd) {\n      lastEnd = ev.end\n    }\n  })\n\n  if (columns.length > 0) {\n    pack(columns, screenWidth, calculatedEvents)\n  }\n  return calculatedEvents\n}\n\nexport default populateEvents\n"]},"metadata":{},"sourceType":"module"}