{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"/mnt/d/Users/Caputo/Desktop/IDEs/VSCode/CEN3031/Project/DCPA-UF-APP/App/node_modules/react-native-events-calendar/src/DayView.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport populateEvents from \"./Packer\";\nimport React from 'react';\nimport moment from 'moment';\nimport _ from 'lodash';\nvar LEFT_MARGIN = 60 - 1;\nvar CALENDER_HEIGHT = 2400;\nvar TEXT_LINE_HEIGHT = 17;\n\nfunction range(from, to) {\n  return Array.from(Array(to), function (_, i) {\n    return from + i;\n  });\n}\n\nvar DayView = function (_React$PureComponent) {\n  _inherits(DayView, _React$PureComponent);\n\n  var _super = _createSuper(DayView);\n\n  function DayView(props) {\n    var _this;\n\n    _classCallCheck(this, DayView);\n\n    _this = _super.call(this, props);\n    var width = props.width - LEFT_MARGIN;\n    var packedEvents = populateEvents(props.events, width);\n    var initPosition = _.min(_.map(packedEvents, 'top')) - CALENDER_HEIGHT / 24;\n    initPosition = initPosition < 0 ? 0 : initPosition;\n    _this.state = {\n      _scrollY: initPosition,\n      packedEvents: packedEvents\n    };\n    return _this;\n  }\n\n  _createClass(DayView, [{\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      var width = nextProps.width - LEFT_MARGIN;\n      this.setState({\n        packedEvents: populateEvents(nextProps.events, width)\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.props.scrollToFirst && this.scrollToFirst();\n    }\n  }, {\n    key: \"scrollToFirst\",\n    value: function scrollToFirst() {\n      var _this2 = this;\n\n      setTimeout(function () {\n        if (_this2.state && _this2.state._scrollY && _this2._scrollView) {\n          _this2._scrollView.scrollTo({\n            x: 0,\n            y: _this2.state._scrollY,\n            animated: true\n          });\n        }\n      }, 1);\n    }\n  }, {\n    key: \"_renderRedLine\",\n    value: function _renderRedLine() {\n      var offset = CALENDER_HEIGHT / 24;\n      var format24h = this.props.format24h;\n      var _this$props = this.props,\n          width = _this$props.width,\n          styles = _this$props.styles;\n      var timeNowHour = moment().hour();\n      var timeNowMin = moment().minutes();\n      return React.createElement(View, {\n        key: \"timeNow\",\n        style: [styles.lineNow, {\n          top: offset * timeNowHour + offset * timeNowMin / 60,\n          width: width - 20\n        }],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 11\n        }\n      });\n    }\n  }, {\n    key: \"_renderLines\",\n    value: function _renderLines() {\n      var _this3 = this;\n\n      var offset = CALENDER_HEIGHT / 24;\n      var format24h = this.props.format24h;\n      return range(0, 25).map(function (item, i) {\n        var timeText;\n\n        if (i === 0) {\n          timeText = \"\";\n        } else if (i < 12) {\n          timeText = !format24h ? i + \" AM\" : i;\n        } else if (i === 12) {\n          timeText = !format24h ? i + \" PM\" : i;\n        } else if (i === 24) {\n          timeText = !format24h ? \"12 AM\" : 0;\n        } else {\n          timeText = !format24h ? i - 12 + \" PM\" : i;\n        }\n\n        var _this3$props = _this3.props,\n            width = _this3$props.width,\n            styles = _this3$props.styles;\n        return [React.createElement(Text, {\n          key: \"timeLabel\" + i,\n          style: [styles.timeLabel, {\n            top: offset * i - 6\n          }],\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 9\n          }\n        }, timeText), i === 0 ? null : React.createElement(View, {\n          key: \"line\" + i,\n          style: [styles.line, {\n            top: offset * i,\n            width: width - 20\n          }],\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 11\n          }\n        }), React.createElement(View, {\n          key: \"lineHalf\" + i,\n          style: [styles.line, {\n            top: offset * (i + 0.5),\n            width: width - 20\n          }],\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 9\n          }\n        })];\n      });\n    }\n  }, {\n    key: \"_renderTimeLabels\",\n    value: function _renderTimeLabels() {\n      var _this4 = this;\n\n      var styles = this.props.styles;\n      var offset = CALENDER_HEIGHT / 24;\n      return range(0, 24).map(function (item, i) {\n        return React.createElement(View, {\n          key: \"line\" + i,\n          style: [styles.line, {\n            top: offset * i\n          }],\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 9\n          }\n        });\n      });\n    }\n  }, {\n    key: \"_onEventTapped\",\n    value: function _onEventTapped(event) {\n      this.props.eventTapped(event);\n    }\n  }, {\n    key: \"_renderEvents\",\n    value: function _renderEvents() {\n      var _this5 = this;\n\n      var styles = this.props.styles;\n      var packedEvents = this.state.packedEvents;\n      var events = packedEvents.map(function (event, i) {\n        var style = {\n          left: event.left,\n          height: event.height,\n          width: event.width,\n          top: event.top\n        };\n        var numberOfLines = Math.floor(event.height / TEXT_LINE_HEIGHT);\n        var formatTime = _this5.props.format24h ? 'HH:mm' : 'hh:mm A';\n        return React.createElement(View, {\n          key: i,\n          style: [styles.event, style],\n          __self: _this5,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 9\n          }\n        }, _this5.props.renderEvent ? _this5.props.renderEvent(event) : React.createElement(TouchableOpacity, {\n          activeOpacity: 0.5,\n          onPress: function onPress() {\n            return _this5._onEventTapped(_this5.props.events[event.index]);\n          },\n          __self: _this5,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 13\n          }\n        }, React.createElement(Text, {\n          numberOfLines: 1,\n          style: styles.eventTitle,\n          __self: _this5,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 15\n          }\n        }, event.title || 'Event'), numberOfLines > 1 ? React.createElement(Text, {\n          numberOfLines: numberOfLines - 1,\n          style: [styles.eventSummary],\n          __self: _this5,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 150,\n            columnNumber: 19\n          }\n        }, event.summary || ' ') : null, numberOfLines > 2 ? React.createElement(Text, {\n          style: styles.eventTimes,\n          numberOfLines: 1,\n          __self: _this5,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 19\n          }\n        }, moment(event.start).format(formatTime), \" - \", moment(event.end).format(formatTime)) : null));\n      });\n      return React.createElement(View, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 7\n        }\n      }, React.createElement(View, {\n        style: {\n          marginLeft: LEFT_MARGIN\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 9\n        }\n      }, events));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this6 = this;\n\n      var styles = this.props.styles;\n      return React.createElement(ScrollView, {\n        ref: function ref(_ref) {\n          return _this6._scrollView = _ref;\n        },\n        contentContainerStyle: [styles.contentStyle, {\n          width: this.props.width\n        }],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 7\n        }\n      }, this._renderLines(), this._renderEvents(), this._renderRedLine());\n    }\n  }]);\n\n  return DayView;\n}(React.PureComponent);\n\nexport { DayView as default };","map":{"version":3,"sources":["/mnt/d/Users/Caputo/Desktop/IDEs/VSCode/CEN3031/Project/DCPA-UF-APP/App/node_modules/react-native-events-calendar/src/DayView.js"],"names":["populateEvents","React","moment","_","LEFT_MARGIN","CALENDER_HEIGHT","TEXT_LINE_HEIGHT","range","from","to","Array","i","DayView","props","width","packedEvents","events","initPosition","min","map","state","_scrollY","nextProps","setState","scrollToFirst","setTimeout","_scrollView","scrollTo","x","y","animated","offset","format24h","styles","timeNowHour","hour","timeNowMin","minutes","lineNow","top","item","timeText","timeLabel","line","event","eventTapped","style","left","height","numberOfLines","Math","floor","formatTime","renderEvent","_onEventTapped","index","eventTitle","title","eventSummary","summary","eventTimes","start","format","end","marginLeft","ref","contentStyle","_renderLines","_renderEvents","_renderRedLine","PureComponent"],"mappings":"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","sourcesContent":["// @flow\nimport {\n  View,\n  Text,\n  ScrollView,\n  TouchableOpacity\n} from 'react-native'\nimport populateEvents from './Packer'\nimport React from 'react'\nimport moment from 'moment'\nimport _ from 'lodash'\n\nconst LEFT_MARGIN = 60 - 1\n// const RIGHT_MARGIN = 10\nconst CALENDER_HEIGHT = 2400\n// const EVENT_TITLE_HEIGHT = 15\nconst TEXT_LINE_HEIGHT = 17\n// const MIN_EVENT_TITLE_WIDTH = 20\n// const EVENT_PADDING_LEFT = 4\n\nfunction range (from, to) {\n  return Array.from(Array(to), (_, i) => from + i)\n}\n\nexport default class DayView extends React.PureComponent {\n  constructor (props) {\n    super(props)\n    const width = props.width - LEFT_MARGIN\n    const packedEvents = populateEvents(props.events, width)\n    let initPosition = _.min(_.map(packedEvents, 'top')) - CALENDER_HEIGHT / 24\n    initPosition = initPosition < 0 ? 0 : initPosition\n    this.state = {\n      _scrollY: initPosition,\n      packedEvents\n    }\n  }\n\n  componentWillReceiveProps (nextProps) {\n    const width = nextProps.width - LEFT_MARGIN\n    this.setState({\n      packedEvents: populateEvents(nextProps.events, width)\n    })\n  }\n\n  componentDidMount () {\n    this.props.scrollToFirst && this.scrollToFirst()\n  }\n\n  scrollToFirst () {\n    setTimeout(() => {\n      if (this.state && this.state._scrollY && this._scrollView) {\n        this._scrollView.scrollTo({ x: 0, y: this.state._scrollY, animated: true })\n      }\n    }, 1)\n  }\n\n  _renderRedLine() {\n      const offset = CALENDER_HEIGHT / 24\n      const { format24h } = this.props\n      const { width, styles } = this.props\n      const timeNowHour = moment().hour()\n      const timeNowMin = moment().minutes()\n      return (\n          <View key={`timeNow`}\n            style={[styles.lineNow, { top: offset * timeNowHour + offset * timeNowMin / 60, width: width - 20 }]}\n          />\n    )\n  }\n\n  _renderLines () {\n    const offset = CALENDER_HEIGHT / 24\n    const { format24h } = this.props\n\n    return range(0, 25).map((item, i) => {\n      let timeText\n      if (i === 0) {\n        timeText = ``\n      } else if (i < 12) {\n        timeText = !format24h ? `${i} AM` : i\n      } else if (i === 12) {\n        timeText = !format24h ? `${i} PM` : i\n      } else if (i === 24) {\n        timeText = !format24h ? `12 AM` : 0\n      } else {\n        timeText = !format24h ? `${i - 12} PM` : i\n      }\n      const { width, styles } = this.props\n      return [\n        <Text\n          key={`timeLabel${i}`}\n          style={[styles.timeLabel, { top: offset * i - 6 }]}\n        >\n          {timeText}\n        </Text>,\n        i === 0 ? null : (\n          <View\n            key={`line${i}`}\n            style={[styles.line, { top: offset * i, width: width - 20 }]}\n          />\n        ),\n        <View\n          key={`lineHalf${i}`}\n          style={[styles.line, { top: offset * (i + 0.5), width: width - 20 }]}\n        />\n      ]\n    })\n  };\n\n  _renderTimeLabels () {\n    const { styles } = this.props\n    const offset = CALENDER_HEIGHT / 24\n    return range(0, 24).map((item, i) => {\n      return (\n        <View key={`line${i}`} style={[styles.line, { top: offset * i }]} />\n      )\n    })\n  }\n\n  _onEventTapped (event) {\n    this.props.eventTapped(event)\n  };\n\n  _renderEvents () {\n    const { styles } = this.props\n    const { packedEvents } = this.state\n    let events = packedEvents.map((event, i) => {\n      const style = {\n        left: event.left,\n        height: event.height,\n        width: event.width,\n        top: event.top\n      }\n\n      // Fixing the number of lines for the event title makes this calculation easier.\n      // However it would make sense to overflow the title to a new line if needed\n      const numberOfLines = Math.floor(event.height / TEXT_LINE_HEIGHT)\n      const formatTime = this.props.format24h ? 'HH:mm' : 'hh:mm A'\n      return (\n        <View\n          key={i}\n          style={[styles.event, style]}\n        >\n          {this.props.renderEvent ? this.props.renderEvent(event) : (\n            <TouchableOpacity\n              activeOpacity={0.5}\n              onPress={() => this._onEventTapped(this.props.events[event.index])}\n            >\n              <Text numberOfLines={1} style={styles.eventTitle}>{event.title || 'Event'}</Text>\n              {numberOfLines > 1\n                ? <Text\n                  numberOfLines={numberOfLines - 1}\n                  style={[styles.eventSummary]}\n                >\n                  {event.summary || ' '}\n                </Text>\n                : null}\n              {numberOfLines > 2\n                ? <Text style={styles.eventTimes} numberOfLines={1}>{moment(event.start).format(formatTime)} - {moment(event.end).format(formatTime)}</Text>\n                : null}\n            </TouchableOpacity>\n          )}\n        </View>\n      )\n    })\n\n    return (\n      <View>\n        <View style={{ marginLeft: LEFT_MARGIN }}>\n          {events}\n        </View>\n      </View>\n    )\n  }\n\n  render () {\n    const { styles } = this.props\n    return (\n      <ScrollView ref={ref => (this._scrollView = ref)}\n        contentContainerStyle={[styles.contentStyle, { width: this.props.width }]}\n      >\n        {this._renderLines()}\n        {this._renderEvents()}\n        {this._renderRedLine()}\n      </ScrollView>\n    )\n  }\n}\n"]},"metadata":{},"sourceType":"module"}